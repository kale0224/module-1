#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAXLEN 100
#define MAX 10

struct list 
{
    char mana[MAXLEN];
    char comp[MAXLEN];
    char name[MAXLEN];
    char mail[MAXLEN];
    char grad[MAXLEN];
    char majo[MAXLEN];
};

int main()
{
    FILE* p_file;
    char str[MAXLEN];
    struct list L[100];

    if (0 == fopen_s(&p_file, ".\\list1.csv", "rt")) 
    {
        char* p_token, * p_next_token;
        int i = 0;
        memset(str, '\0', MAXLEN);

        while (str != NULL)
        {
            fgets(str, 2048, p_file);

            printf("%s\n", str);

            p_token = strtok_s(str, ",", &p_next_token);
                        
            if (p_token == NULL || !strcmp(p_token, "\n")) continue;

            if (0 == (strcmp(p_token, "조장")))
            {
                strcpy(L[i].mana, p_token);
                p_token = strtok_s(NULL, ",", &p_next_token);
                i++;

                strcpy(L[i].comp, p_token);
                p_token = strtok_s(NULL, ",", &p_next_token);
                i++;

                strcpy(L[i].name, p_token);
                p_token = strtok_s(NULL, ",", &p_next_token);
                i++;

                strcpy(L[i].mail, p_token);
                p_token = strtok_s(NULL, ",", &p_next_token);
                i++;

                strcpy(L[i].grad, p_token);
                p_token = strtok_s(NULL, ",", &p_next_token);
                i++;

                strcpy(L[i].majo, p_token);
                p_token = strtok_s(NULL, ",", &p_next_token);
                i++;
            }

            else
            {
                strcpy(L[i].comp, p_token);
                p_token = strtok_s(NULL, ",", &p_next_token);
                i++;

                strcpy(L[i].name, p_token);
                p_token = strtok_s(NULL, ",", &p_next_token);
                i++;

                strcpy(L[i].mail, p_token);
                p_token = strtok_s(NULL, ",", &p_next_token);
                i++;

                strcpy(L[i].grad, p_token);
                p_token = strtok_s(NULL, ",", &p_next_token);
                i++;

                strcpy(L[i].majo, p_token);
                p_token = strtok_s(NULL, ",", &p_next_token);
                i++;
            }
        }
        
    }

    fclose(p_file);

    for (int i = 0; i < 24; i++)
    {
        printf("%s\t%s\t%s\t%s\t%s\t%s\n", L[i].mana, L[i].comp, L[i].name, L[i].mail, L[i].grad, L[i].majo);
    }

    return 0;
}
